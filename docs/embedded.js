!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("mapbox-gl")):"function"==typeof define&&define.amd?define(["exports","mapbox-gl"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).bundle={},e.mapboxgl)}(this,(function(e,t){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var i=n(t);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?p(e):t}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=d(e);if(t){var r=d(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return y(this,n)}}function g(e,t,n){return(g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function b(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function A(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||k(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){if(e){if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function _(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=k(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function x(e){return("0"+e.toString(16)).substr(-2)}function O(e){var t=new Uint8Array((e||40)/2);return(window.crypto?window.crypto:window.msCrypto).getRandomValues(t),Array.from(t,x).join("")}function S(e,t){e.forEach((function(e){t[e]=t[e].bind(t)}))}var T,N={selectTool:function(e,t){return c(c({},e),{},{activeTool:t.id})},openDropdownMenu:function(e){return c(c({},e),{},{dropdownMenuOpen:!0})},closeDropdownMenu:function(e){return c(c({},e),{},{dropdownMenuOpen:!1})}},M=function(e){var t={},n=function(e){t[e]=function(t){return c(c({},t),{},{type:e})}};for(var i in e)n(i);return t}(N),E=function(e){return function(t,n){return e.hasOwnProperty(n.type)?e[n.type](t,n):t}}(N),P=(T={toolbar:E},function(e,t){var n=!1,i={};for(var r in T)i[r]=T[r](e[r],t),n=n||i[r]!==e[r];return n?i:e}),L=new WeakMap,j=function(e){return"function"==typeof e&&L.has(e)},B="undefined"!=typeof window&&null!=window.customElements&&void 0!==window.customElements.polyfillWrapFlushCallback,C=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;t!==n;){var i=t.nextSibling;e.removeChild(t),t=i}},R={},F={},I="{{lit-".concat(String(Math.random()).slice(2),"}}"),V="\x3c!--".concat(I,"--\x3e"),D=new RegExp("".concat(I,"|").concat(V)),H=function e(t,n){o(this,e),this.parts=[],this.element=n;for(var i=[],r=[],a=document.createTreeWalker(n.content,133,null,!1),s=0,u=-1,l=0,c=t.strings,h=t.values.length;l<h;){var d=a.nextNode();if(null!==d){if(u++,1===d.nodeType){if(d.hasAttributes()){for(var f=d.attributes,v=f.length,p=0,y=0;y<v;y++)U(f[y].name,"$lit$")&&p++;for(;p-- >0;){var m=c[l],g=Y.exec(m)[2],b=g.toLowerCase()+"$lit$",A=d.getAttribute(b);d.removeAttribute(b);var k=A.split(D);this.parts.push({type:"attribute",index:u,name:g,strings:k}),l+=k.length-1}}"TEMPLATE"===d.tagName&&(r.push(d),a.currentNode=d.content)}else if(3===d.nodeType){var w=d.data;if(w.indexOf(I)>=0){for(var _=d.parentNode,x=w.split(D),O=x.length-1,S=0;S<O;S++){var T=void 0,N=x[S];if(""===N)T=z();else{var M=Y.exec(N);null!==M&&U(M[2],"$lit$")&&(N=N.slice(0,M.index)+M[1]+M[2].slice(0,-"$lit$".length)+M[3]),T=document.createTextNode(N)}_.insertBefore(T,d),this.parts.push({type:"node",index:++u})}""===x[O]?(_.insertBefore(z(),d),i.push(d)):d.data=x[O],l+=O}}else if(8===d.nodeType)if(d.data===I){var E=d.parentNode;null!==d.previousSibling&&u!==s||(u++,E.insertBefore(z(),d)),s=u,this.parts.push({type:"node",index:u}),null===d.nextSibling?d.data="":(i.push(d),u--),l++}else for(var P=-1;-1!==(P=d.data.indexOf(I,P+1));)this.parts.push({type:"node",index:-1}),l++}else a.currentNode=r.pop()}for(var L=0,j=i;L<j.length;L++){var B=j[L];B.parentNode.removeChild(B)}},U=function(e,t){var n=e.length-t.length;return n>=0&&e.slice(n)===t},Q=function(e){return-1!==e.index},z=function(){return document.createComment("")},Y=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/,G=function(){function e(t,n,i){o(this,e),this.__parts=[],this.template=t,this.processor=n,this.options=i}return s(e,[{key:"update",value:function(e){var t,n=0,i=_(this.__parts);try{for(i.s();!(t=i.n()).done;){var r=t.value;void 0!==r&&r.setValue(e[n]),n++}}catch(e){i.e(e)}finally{i.f()}var o,a=_(this.__parts);try{for(a.s();!(o=a.n()).done;){var s=o.value;void 0!==s&&s.commit()}}catch(e){a.e(e)}finally{a.f()}}},{key:"_clone",value:function(){for(var e,t=B?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),n=[],i=this.template.parts,r=document.createTreeWalker(t,133,null,!1),o=0,a=0,s=r.nextNode();o<i.length;)if(e=i[o],Q(e)){for(;a<e.index;)a++,"TEMPLATE"===s.nodeName&&(n.push(s),r.currentNode=s.content),null===(s=r.nextNode())&&(r.currentNode=n.pop(),s=r.nextNode());if("node"===e.type){var u=this.processor.handleTextExpression(this.options);u.insertAfterNode(s.previousSibling),this.__parts.push(u)}else{var l;(l=this.__parts).push.apply(l,A(this.processor.handleAttributeExpressions(s,e.name,e.strings,this.options)))}o++}else this.__parts.push(void 0),o++;return B&&(document.adoptNode(t),customElements.upgrade(t)),t}}]),e}(),Z=" ".concat(I," "),J=function(){function e(t,n,i,r){o(this,e),this.strings=t,this.values=n,this.type=i,this.processor=r}return s(e,[{key:"getHTML",value:function(){for(var e=this.strings.length-1,t="",n=!1,i=0;i<e;i++){var r=this.strings[i],o=r.lastIndexOf("\x3c!--");n=(o>-1||n)&&-1===r.indexOf("--\x3e",o+1);var a=Y.exec(r);t+=null===a?r+(n?Z:V):r.substr(0,a.index)+a[1]+a[2]+"$lit$"+a[3]+I}return t+=this.strings[e]}},{key:"getTemplateElement",value:function(){var e=document.createElement("template");return e.innerHTML=this.getHTML(),e}}]),e}(),W=function(e){return null===e||!("object"===r(e)||"function"==typeof e)},K=function(e){return Array.isArray(e)||!(!e||!e[Symbol.iterator])},X=function(){function e(t,n,i){o(this,e),this.dirty=!0,this.element=t,this.name=n,this.strings=i,this.parts=[];for(var r=0;r<i.length-1;r++)this.parts[r]=this._createPart()}return s(e,[{key:"_createPart",value:function(){return new q(this)}},{key:"_getValue",value:function(){for(var e=this.strings,t=e.length-1,n="",i=0;i<t;i++){n+=e[i];var r=this.parts[i];if(void 0!==r){var o=r.value;if(W(o)||!K(o))n+="string"==typeof o?o:String(o);else{var a,s=_(o);try{for(s.s();!(a=s.n()).done;){var u=a.value;n+="string"==typeof u?u:String(u)}}catch(e){s.e(e)}finally{s.f()}}}}return n+=e[t]}},{key:"commit",value:function(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}}]),e}(),q=function(){function e(t){o(this,e),this.value=void 0,this.committer=t}return s(e,[{key:"setValue",value:function(e){e===R||W(e)&&e===this.value||(this.value=e,j(e)||(this.committer.dirty=!0))}},{key:"commit",value:function(){for(;j(this.value);){var e=this.value;this.value=R,e(this)}this.value!==R&&this.committer.commit()}}]),e}(),$=function(){function e(t){o(this,e),this.value=void 0,this.__pendingValue=void 0,this.options=t}return s(e,[{key:"appendInto",value:function(e){this.startNode=e.appendChild(z()),this.endNode=e.appendChild(z())}},{key:"insertAfterNode",value:function(e){this.startNode=e,this.endNode=e.nextSibling}},{key:"appendIntoPart",value:function(e){e.__insert(this.startNode=z()),e.__insert(this.endNode=z())}},{key:"insertAfterPart",value:function(e){e.__insert(this.startNode=z()),this.endNode=e.endNode,e.endNode=this.startNode}},{key:"setValue",value:function(e){this.__pendingValue=e}},{key:"commit",value:function(){if(null!==this.startNode.parentNode){for(;j(this.__pendingValue);){var e=this.__pendingValue;this.__pendingValue=R,e(this)}var t=this.__pendingValue;t!==R&&(W(t)?t!==this.value&&this.__commitText(t):t instanceof J?this.__commitTemplateResult(t):t instanceof Node?this.__commitNode(t):K(t)?this.__commitIterable(t):t===F?(this.value=F,this.clear()):this.__commitText(t))}}},{key:"__insert",value:function(e){this.endNode.parentNode.insertBefore(e,this.endNode)}},{key:"__commitNode",value:function(e){this.value!==e&&(this.clear(),this.__insert(e),this.value=e)}},{key:"__commitText",value:function(e){var t=this.startNode.nextSibling,n="string"==typeof(e=null==e?"":e)?e:String(e);t===this.endNode.previousSibling&&3===t.nodeType?t.data=n:this.__commitNode(document.createTextNode(n)),this.value=e}},{key:"__commitTemplateResult",value:function(e){var t=this.options.templateFactory(e);if(this.value instanceof G&&this.value.template===t)this.value.update(e.values);else{var n=new G(t,e.processor,this.options),i=n._clone();n.update(e.values),this.__commitNode(i),this.value=n}}},{key:"__commitIterable",value:function(t){Array.isArray(this.value)||(this.value=[],this.clear());var n,i,r=this.value,o=0,a=_(t);try{for(a.s();!(i=a.n()).done;){var s=i.value;void 0===(n=r[o])&&(n=new e(this.options),r.push(n),0===o?n.appendIntoPart(this):n.insertAfterPart(r[o-1])),n.setValue(s),n.commit(),o++}}catch(e){a.e(e)}finally{a.f()}o<r.length&&(r.length=o,this.clear(n&&n.endNode))}},{key:"clear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.startNode;C(this.startNode.parentNode,e.nextSibling,this.endNode)}}]),e}(),ee=function(){function e(t,n,i){if(o(this,e),this.value=void 0,this.__pendingValue=void 0,2!==i.length||""!==i[0]||""!==i[1])throw new Error("Boolean attributes can only contain a single expression");this.element=t,this.name=n,this.strings=i}return s(e,[{key:"setValue",value:function(e){this.__pendingValue=e}},{key:"commit",value:function(){for(;j(this.__pendingValue);){var e=this.__pendingValue;this.__pendingValue=R,e(this)}if(this.__pendingValue!==R){var t=!!this.__pendingValue;this.value!==t&&(t?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name),this.value=t),this.__pendingValue=R}}}]),e}(),te=function(e){h(n,e);var t=m(n);function n(e,i,r){var a;return o(this,n),(a=t.call(this,e,i,r)).single=2===r.length&&""===r[0]&&""===r[1],a}return s(n,[{key:"_createPart",value:function(){return new ne(this)}},{key:"_getValue",value:function(){return this.single?this.parts[0].value:g(d(n.prototype),"_getValue",this).call(this)}},{key:"commit",value:function(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}}]),n}(X),ne=function(e){h(n,e);var t=m(n);function n(){return o(this,n),t.apply(this,arguments)}return n}(q),ie=!1;!function(){try{var e={get capture(){return ie=!0,!1}};window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch(e){}}();var re=function(){function e(t,n,i){var r=this;o(this,e),this.value=void 0,this.__pendingValue=void 0,this.element=t,this.eventName=n,this.eventContext=i,this.__boundHandleEvent=function(e){return r.handleEvent(e)}}return s(e,[{key:"setValue",value:function(e){this.__pendingValue=e}},{key:"commit",value:function(){for(;j(this.__pendingValue);){var e=this.__pendingValue;this.__pendingValue=R,e(this)}if(this.__pendingValue!==R){var t=this.__pendingValue,n=this.value,i=null==t||null!=n&&(t.capture!==n.capture||t.once!==n.once||t.passive!==n.passive),r=null!=t&&(null==n||i);i&&this.element.removeEventListener(this.eventName,this.__boundHandleEvent,this.__options),r&&(this.__options=oe(t),this.element.addEventListener(this.eventName,this.__boundHandleEvent,this.__options)),this.value=t,this.__pendingValue=R}}},{key:"handleEvent",value:function(e){"function"==typeof this.value?this.value.call(this.eventContext||this.element,e):this.value.handleEvent(e)}}]),e}(),oe=function(e){return e&&(ie?{capture:e.capture,passive:e.passive,once:e.once}:e.capture)},ae=new(function(){function e(){o(this,e)}return s(e,[{key:"handleAttributeExpressions",value:function(e,t,n,i){var r=t[0];return"."===r?new te(e,t.slice(1),n).parts:"@"===r?[new re(e,t.slice(1),i.eventContext)]:"?"===r?[new ee(e,t.slice(1),n)]:new X(e,t,n).parts}},{key:"handleTextExpression",value:function(e){return new $(e)}}]),e}());function se(e){var t=ue.get(e.type);void 0===t&&(t={stringsArray:new WeakMap,keyString:new Map},ue.set(e.type,t));var n=t.stringsArray.get(e.strings);if(void 0!==n)return n;var i=e.strings.join(I);return void 0===(n=t.keyString.get(i))&&(n=new H(e,e.getTemplateElement()),t.keyString.set(i,n)),t.stringsArray.set(e.strings,n),n}var ue=new Map,le=new WeakMap,ce=function(e,t,n){var i=le.get(t);void 0===i&&(C(t,t.firstChild),le.set(t,i=new $(Object.assign({templateFactory:se},n))),i.appendInto(t)),i.setValue(e),i.commit()};"undefined"!=typeof window&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.2.1");var he=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return new J(e,n,"html",ae)};function de(e,t){var n=function(e){for(var t=0;t<e.length;t++)if(e[t].id.includes("label"))return e[t].id}(e.getStyle().layers);e.addLayer(t,n)}var fe=function(){function e(t,n,i){var r;o(this,e),this.map=t,this.id=n.id,this.sourceId="string"==typeof(r=n.source)||r instanceof String?n.source:n.id,this.type=n.type,this.sourceLayer=n["source-layer"],i?i(t,n):t.addLayer(n),this.getFeature=this.getFeature.bind(this)}return s(e,[{key:"setOpacity",value:function(e){this.setPaintProperty("".concat(this.type,"-opacity"),e)}},{key:"setColor",value:function(e){this.setPaintProperty("".concat(this.type,"-color"),e)}},{key:"getColor",value:function(){return this.getPaintProperty("".concat(this.type,"-color"))}},{key:"setPaintProperties",value:function(e){for(var t in e)this.setPaintProperty(t,e[t])}},{key:"setFeatureState",value:function(e,t){this.map.setFeatureState({source:this.sourceId,sourceLayer:this.sourceLayer,id:e},t)}},{key:"setPaintProperty",value:function(e,t){this.map.setPaintProperty(this.id,e,t)}},{key:"getPaintProperty",value:function(e){return this.map.getPaintProperty(this.id,e)}},{key:"getFeatureState",value:function(e){return this.map.getFeatureState({source:this.sourceId,sourceLayer:this.sourceLayer,id:e})}},{key:"getFeature",value:function(e){return this.map.querySourceFeatures(this.sourceId,{sourceLayer:this.sourceLayer,filter:["==",["id"],e]})[0]}},{key:"queryRenderedFeatures",value:function(){return this.map.queryRenderedFeatures(null,{layers:[this.id]})}},{key:"querySourceFeatures",value:function(){return this.map.querySourceFeatures(this.sourceId,{sourceLayer:this.sourceLayer})}},{key:"getAssignment",value:function(e){return this.getFeatureState(e).color}},{key:"setAssignment",value:function(e,t){this.setFeatureState(e.id,c(c({},e.state),{},{color:t}))}},{key:"on",value:function(e){for(var t,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];(t=this.map).on.apply(t,[e,this.id].concat(i))}},{key:"off",value:function(e){for(var t,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];(t=this.map).off.apply(t,[e,this.id].concat(i))}},{key:"untilSourceLoaded",value:function(e){var t=this;if(this.map.isSourceLoaded(this.sourceId))return e();this.map.on("sourcedata",(function n(){return e((function(){return t.map.off("sourcedata",n)}))}))}}]),e}(),ve=function e(t,n,r){o(this,e),this.map=new i.default.Map(c({container:t,style:r,attributionControl:!1,minZoom:5,pitchWithRotate:!1,dragPan:!0,touchZoomRotate:!0},n)),this.nav=new i.default.NavigationControl,this.map.addControl(this.nav,"top-left"),this.mapboxgl=i.default};function pe(e,t,n){return{units:new fe(e,{id:t.sourceLayer,source:t.sourceLayer,"source-layer":t.sourceLayer,type:"fill",paint:{"fill-color":["case",["boolean",["feature-state","hover"],!1],["match",["feature-state","color"],0,"#000000","#777777"],["match",["feature-state","color"],0,"#202f24","rgba(0, 0, 0, 0)"]],"fill-opacity":.55}},n),unitsBorders:new fe(e,{id:"units-borders",type:"line",source:t.sourceLayer,"source-layer":t.sourceLayer,paint:{"line-color":"#444444","line-width":["interpolate",["linear"],["zoom"],9.5,0,17,2],"line-opacity":.2}},n)}}function ye(e,t,n,i){return new fe(e,{id:"ovrlay",source:t.sourceLayer,"source-layer":t.sourceLayer,type:"fill",paint:i},n)}var me=function(){function e(t){var n=t.key,i=t.name;o(this,e),this.key=n,this.name=i}return s(e,[{key:"getValue",value:function(e){if(void 0!==e.properties)return e.properties[this.key]}}]),e}(),ge=function(){function e(t){var n=t.id,i=t.idColumn;o(this,e),this.id=n||O(8),this.assignment={},this.idColumn=i}return s(e,[{key:"update",value:function(e,t){this.assignment[this.idColumn.getValue(e)]=t}}]),e}(),be=function(){function e(t,n){var i=n.id,r=n.units,a=n.showOverlay,s=n.overlayRule,u=v(n,["id","units","showOverlay","overlayRule"]);o(this,e),this.unitsRecord=r,this.idColumn=new me(r.idColumn),this.plan=new ge(c(c({id:i},u),{},{idColumn:this.idColumn})),this.initializeMapState(t,r,de,a,s),this.subscribers=[],this.update=this.update.bind(this),this.render=this.render.bind(this)}return s(e,[{key:"initializeMapState",value:function(e,t,n,i,r){t.tileset.source.promoteId={},t.tileset.source.promoteId[t.tileset.sourceLayer]=t.idColumn.key;var o=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};e.addSource(t.sourceLayer,t.source);var o=i?ye(e,t,n,r):null,a=pe(e,t,n),s=a.units,u=a.unitsBorders;return{units:s,unitsBorders:u,overlay:o}}(e,t.tileset,n,i,r),a=o.units,s=o.unitsBorders,u=o.overlay;this.units=a,this.unitsBorders=s,this.layers=[a,u],this.map=e}},{key:"update",value:function(e,t){this.plan.update(e,t)}},{key:"subscribe",value:function(e){this.subscribers.push(e),this.render()}},{key:"render",value:function(){var e,t=_(this.subscribers);try{for(t.s();!(e=t.n()).done;){(0,e.value)()}}catch(e){t.e(e)}finally{t.f()}}},{key:"hasExpectedData",value:function(e){if(void 0===e||void 0===e.properties)return!1;var t,n=_(this.columns);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(void 0===e.properties[i.key])return!1}}catch(e){n.e(e)}finally{n.f()}return!0}}]),e}();function Ae(){var e=b(['\n    <div class="ui-option">\n        <legend class="ui-label ui-label--row">\n            ','\n        </legend>\n        <div class="slider-container">\n            <input\n                class="slider"\n                type="range"\n                value="','"\n                min="1"\n                max="40"\n                @change=','\n            />\n            <input\n                class="slider-value"\n                type="number"\n                value="','"\n                min="1"\n                max="40"\n                @change=',"\n            />\n        </div>\n    </div>\n"]);return Ae=function(){return e},e}var ke=function(e,t,n){return he(Ae(),n?n.title:"Brush Size",e,t,e,t)};function we(){var e=b(['\n            <div class="icon-list__item" title="','">\n                <label>','</label>\n                <input\n                    type="radio"\n                    id="tool-','"\n                    name="tool"\n                    value="','"\n                    @change=',"\n                    ?checked=",'\n                />\n                <div class="icon-list__item__radio"></div>\n                ',"\n            </div>\n        "]);return we=function(){return e},e}var _e=function(){function e(t,n,i){o(this,e),this.id=t,this.name=n,this.icon=i,this.active=!1}return s(e,[{key:"activate",value:function(){this.active=!0}},{key:"deactivate",value:function(){this.active=!1}},{key:"render",value:function(e){var t=this;return he(we(),this.name,this.name,this.id,this.id,(function(){return e(t.id)}),this.active,this.icon)}}]),e}();function xe(){var e=b(["",""]);return xe=function(){return e},e}function Oe(){var e=b(['<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"\n            style="display: inline-block; height: 26px; z-index: 100;">\n            <path d="M2 2 L17 12 L12 13 L16 22 L10 14 L6 18 Z" fill="currentColor"></path>\n        </svg>']);return Oe=function(){return e},e}var Se=function(e){h(n,e);var t=m(n);function n(e){var i;o(this,n);var r=he(Oe());return(i=t.call(this,"brush","Draw",r)).brush=e,i.options=new Te(e),i}return s(n,[{key:"activate",value:function(){g(d(n.prototype),"activate",this).call(this),this.brush.activate()}},{key:"deactivate",value:function(){g(d(n.prototype),"deactivate",this).call(this),this.brush.deactivate()}}]),n}(_e),Te=function(){function e(t,n){o(this,e),this.brush=t,this.renderToolbar=n,this.changeRadius=this.changeRadius.bind(this)}return s(e,[{key:"changeRadius",value:function(e){e.stopPropagation();var t=parseInt(e.target.value);this.brush.radius!=t&&(this.brush.radius=t),this.renderToolbar()}},{key:"render",value:function(){return he(xe(),ke(this.brush.radius,this.changeRadius))}}]),e}();function Ne(){var e=b(["\n            ","\n        "]);return Ne=function(){return e},e}function Me(){var e=b(['<img src="','" alt="Erase" \n            style="display: inline-block; height: 26px !important; z-index: 100;"></img>']);return Me=function(){return e},e}var Ee=function(e){h(n,e);var t=m(n);function n(e){var i;o(this,n);var r=he(Me(),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAA7EAAAOxAGVKw4bAAABBElEQVRo3u3Yuw7BYBiH8WdmcLorXIxuRjtuSWKjTiM3YBWjSQ3yJY00aL9TX94n+UbJ7y/apkDTNO2fagJz4ARcgSUwjI36tjaQAtnLuQNJbNynWsC6AJ8/49hIG3xtR5TB125EFXxtRtjgo49wgY82wiU++Agf+GAj2sDGE94cbw+7EHjzxB5IxZuzkozPgJtkfAacJeMzYCoZnwING7zP+/ynswe6ile84uXgezb4JsX/HoQ4W6BjgweYScYDHCPgD1j+bPJdAuN3rr5500IyHqDP8+UhBN7qVvmuRDLeNPKEL7pgJyU+H3WELb70AJcjXOArDXAxwhW+8gBN0zTtN3sAFI5CX1O33XwAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjAtMDgtMDRUMDI6NDg6NDkrMDA6MDADjPrkAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIwLTA4LTA0VDAyOjQ4OjQ5KzAwOjAwctFCWAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII=");return(i=t.call(this,"eraser","Erase",r)).brush=e,i.options=new Pe(e),i}return s(n,[{key:"activate",value:function(){g(d(n.prototype),"activate",this).call(this),this.brush.activate(),this.brush.startErasing()}},{key:"deactivate",value:function(){g(d(n.prototype),"deactivate",this).call(this),this.brush.deactivate(),this.brush.stopErasing()}}]),n}(_e),Pe=function(){function e(t,n){o(this,e),this.brush=t,this.renderToolbar=n,this.changeRadius=this.changeRadius.bind(this)}return s(e,[{key:"changeRadius",value:function(e){e.stopPropagation();var t=parseInt(e.target.value);this.brush.radius!=t&&(this.brush.radius=t),this.renderToolbar()}},{key:"render",value:function(){return he(Ne(),ke(this.brush.radius,this.changeRadius,{title:"Eraser Size"}))}}]),e}();function Le(){var e=b(['<img src="','" alt="Pan" \n            style="display: inline-block; height: 24px !important; z-index: 100;"></img>']);return Le=function(){return e},e}var je=function(e){h(n,e);var t=m(n);function n(){o(this,n);var e=he(Le(),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAABtElEQVR4AezWAWYDURSF4SIIsoCgiwiCIgAUUGQBs4QACugyggK6hCAoAgigKIKiyAIGRTC4/QGlcR6PiTH3HL4N/OOOdzfQTbDBO76xQwPmTXBAXPGG9HtBCA1S7xMh7LKfZBS02U8ySrKfZJTVnOTwN8MKDZaY1gaqOMnB7xFnxB8nLPsPhIFvgU583fvsgfYIYZs9UIsQPrIHirLbBtIPSwfSD0sHKj8skwcqPyyzB4qC1oEKHMiBHMiBHMiBHMiBHKiHOZADOZADOZADOZADDUCSQA7kQA7kQA40caD/m2GLFhfs8QQHYnOcEFccsEgSSMcROrxiniSQjiO0eMY0S6AjosIX1hkCPeAHUemAxdj/QauKSOL/NJ5A9ZHE/2kkgXSkhPQcSc+RCnMkOR3p4kB6a3QO5Eh6jqTnSMU5kp4j6TlST2tGEueM3rYZQaDj7/B7cTSQVoM8MRpIpG+oGw0kaEUjgttLo4HUj9sro4H0HnfqGQ2k3+DjMwYYVA/iwMlmGCQgfDCNTELd4s0wyIAKEK8fBKlmPvhglUEMdIC4Gdpy/UynLsRh6FydCrGOBABk1k0h3bUPJgAAAABJRU5ErkJggg==");return t.call(this,"pan","Pan",e)}return n}(_e);var Be=function(e){h(n,e);var t=m(n);function n(e,i,r){var a;return o(this,n),(a=t.call(this,e,i)).color=r,a.locked=!1,a.listeners={colorend:[],colorfeature:[],mouseup:[]},S(["onClick","onTouchEnd"],p(a)),a}return s(n,[{key:"setColor",value:function(e){this.color=parseInt(e)}},{key:"startErasing",value:function(){this._previousColor=this.color,this.color=null,this.erasing=!0}},{key:"stopErasing",value:function(){this.color=this._previousColor,this.erasing=!1}},{key:"hoverOn",value:function(e){this.hoveredFeatures=e,g(d(n.prototype),"hoverOn",this).call(this,e)}},{key:"colorFeatures",value:function(){var e=this;this.locked&&!this.erasing?this._colorFeatures((function(e){return null===e.state.color||void 0===e.state.color})):this._colorFeatures((function(t){return t.state.color!==e.color}))}},{key:"_colorFeatures",value:function(e){var t,n=new Set,i=_(this.hoveredFeatures);try{for(i.s();!(t=i.n()).done;){var r=t.value;if(e(r)&&!r.state.home){if(!n.has(r.id)){n.add(r.id);var o,a=_(this.listeners.colorfeature);try{for(a.s();!(o=a.n()).done;){(0,o.value)(r,this.color)}}catch(e){a.e(e)}finally{a.f()}}this.layer.setFeatureState(r.id,c(c({},r.state),{},{color:this.color,hover:!0})),r.state.color=this.color}else this.layer.setFeatureState(r.id,c(c({},r.state),{},{hover:!0}))}}catch(e){i.e(e)}finally{i.f()}var s,u=_(this.listeners.colorend);try{for(u.s();!(s=u.n()).done;){(0,s.value)()}}catch(e){u.e(e)}finally{u.f()}}},{key:"onClick",value:function(){this.colorFeatures()}},{key:"onTouchEnd",value:function(e){e.points&&e.points.length<=1&&this.colorFeatures()}},{key:"activate",value:function(){this.layer.map.getCanvas().classList.add("brush-tool"),g(d(n.prototype),"activate",this).call(this),this.layer.on("click",this.onClick),this.layer.map.on("touchend",this.onTouchEnd)}},{key:"deactivate",value:function(){this.layer.map.getCanvas().classList.remove("brush-tool"),g(d(n.prototype),"deactivate",this).call(this),this.layer.off("click",this.onClick),this.layer.map.off("touchend",this.onTouchEnd)}},{key:"on",value:function(e,t){this.listeners[e].push(t)}}]),n}(function(e){h(n,e);var t=m(n);function n(e,i){var r;return o(this,n),(r=t.call(this,e)).radius=i,r.hoveredFeatures=[],r}return s(n,[{key:"hoverOff",value:function(){var e=this;this.hoveredFeatures.forEach((function(t){e.layer.setFeatureState(t.id,c(c({},t.state),{},{hover:!1}))})),this.hoveredFeatures=[]}},{key:"hoverOn",value:function(e){var t=this;this.hoveredFeatures=e,this.hoveredFeatures.forEach((function(e){t.layer.setFeatureState(e.id,c(c({},e.state),{},{hover:!0}))}))}},{key:"onMouseMove",value:function(e){var t,n,i,r=(t=e.point,n=this.radius,i=[t.x+n,t.y+n],[[t.x-n,t.y-n],i]),o=this.layer.map.queryRenderedFeatures(r,{layers:[this.layer.id]});o.length>0&&(this.hoverOff(),this.hoverOn(o))}}]),n}(function(){function e(t){o(this,e),this.layer=t,this.hoveredFeature=null,this.onMouseMove=this.onMouseMove.bind(this),this.onMouseLeave=this.onMouseLeave.bind(this),this.hoverOff=this.hoverOff.bind(this)}return s(e,[{key:"hoverOff",value:function(){null!==this.hoveredFeature&&(this.layer.setFeatureState(this.hoveredFeature.id,c(c({},this.hoveredFeature.state),{},{hover:!1})),this.hoveredFeature=null)}},{key:"hoverOn",value:function(e){this.hoveredFeature=e,this.layer.setFeatureState(e.id,c(c({},e.state),{},{hover:!0}))}},{key:"onMouseMove",value:function(e){e.features.length>0&&(this.hoverOff(),this.hoverOn(e.features[0]))}},{key:"onMouseLeave",value:function(){this.hoverOff()}},{key:"activate",value:function(){this.layer.on("mousemove",this.onMouseMove),this.layer.on("mouseleave",this.onMouseLeave),this.layer.on("touchmove",this.onMouseMove,{passive:!1}),this.layer.on("touchend",this.onMouseLeave)}},{key:"deactivate",value:function(){this.layer.off("mousemove",this.onMouseMove),this.layer.off("mouseleave",this.onMouseLeave),this.layer.off("touchmove",this.onMouseMove),this.layer.off("touchend",this.onMouseLeave)}}]),e}()));var Ce,Re=function(){function e(t,n){o(this,e),this.reducer=t,this.state=n,this.subscribers=[],S(["dispatch","subscribe"],this)}return s(e,[{key:"dispatch",value:function(e){var t=this,n=this.reducer(this.state,e);n!==this.state&&(this.state=n,this.subscribers.forEach((function(e){return e(t.state,t.dispatch)})))}},{key:"subscribe",value:function(e){this.subscribers.push(e)}}]),e}(),Fe=function(e,t){var n=e.startNode.parentNode,i=void 0===t?e.endNode:t.startNode,r=n.insertBefore(z(),i);n.insertBefore(z(),i);var o=new $(e.options);return o.insertAfterNode(r),o},Ie=function(e,t){return e.setValue(t),e.commit(),e},Ve=function(e,t,n){var i=e.startNode.parentNode,r=n?n.startNode:e.endNode,o=t.endNode.nextSibling;o!==r&&function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;t!==n;){var r=t.nextSibling;e.insertBefore(t,i),t=r}}(i,t.startNode,o,r)},De=function(e){C(e.startNode.parentNode,e.startNode,e.endNode.nextSibling)},He=function(e,t,n){for(var i=new Map,r=t;r<=n;r++)i.set(e[r],r);return i},Ue=new WeakMap,Qe=new WeakMap,ze=(Ce=function(e,t,n){var i;return void 0===n?n=t:void 0!==t&&(i=t),function(t){if(!(t instanceof $))throw new Error("repeat can only be used in text bindings");var r,o,a,s=Ue.get(t)||[],u=Qe.get(t)||[],l=[],c=[],h=[],d=0,f=_(e);try{for(f.s();!(r=f.n()).done;){var v=r.value;h[d]=i?i(v,d):d,c[d]=n(v,d),d++}}catch(e){f.e(e)}finally{f.f()}for(var p=0,y=s.length-1,m=0,g=c.length-1;p<=y&&m<=g;)if(null===s[p])p++;else if(null===s[y])y--;else if(u[p]===h[m])l[m]=Ie(s[p],c[m]),p++,m++;else if(u[y]===h[g])l[g]=Ie(s[y],c[g]),y--,g--;else if(u[p]===h[g])l[g]=Ie(s[p],c[g]),Ve(t,s[p],l[g+1]),p++,g--;else if(u[y]===h[m])l[m]=Ie(s[y],c[m]),Ve(t,s[y],s[p]),y--,m++;else if(void 0===o&&(o=He(h,m,g),a=He(u,p,y)),o.has(u[p]))if(o.has(u[y])){var b=a.get(h[m]),A=void 0!==b?s[b]:null;if(null===A){var k=Fe(t,s[p]);Ie(k,c[m]),l[m]=k}else l[m]=Ie(A,c[m]),Ve(t,A,s[p]),s[b]=null;m++}else De(s[y]),y--;else De(s[p]),p++;for(;m<=g;){var w=Fe(t,l[g+1]);Ie(w,c[m]),l[m++]=w}for(;p<=y;){var x=s[p++];null!==x&&De(x)}Ue.set(t,l),Qe.set(t,h)}},function(){var e=Ce.apply(void 0,arguments);return L.set(e,!0),e});function Ye(){var e=b(['\n    <section\n        class="tool-options ','"\n    >\n        ',"\n    </section>\n"]);return Ye=function(){return e},e}function Ge(){var e=b(['\n        <div class="districtr__mini-toolbar">\n            <nav>\n                <div class="districtr__mini-toolbar-top">\n                    <div class="icon-list">\n                        ',"\n                    </div>\n                </div>\n            </nav>\n            ","\n            </div>\n        </div>\n        "]);return Ge=function(){return e},e}var Ze=function(){function e(t,n){o(this,e),this.tools=[],this.toolsById={},this.menuItems=[],this.renderCallback=n.render,this.render=this.render.bind(this),this.selectTool=this.selectTool.bind(this),this.addTool=this.addTool.bind(this),this.store=t}return s(e,[{key:"selectTool",value:function(e){this.activeTool&&this.activeTool.deactivate(),this.toolsById[e].activate(),this.store.dispatch(M.selectTool({id:e}))}},{key:"addTool",value:function(e){void 0!==e.options&&(e.options.renderToolbar=this.renderCallback),this.toolsById[e.id]=e,this.tools.push(e)}},{key:"setMenuItems",value:function(e){this.menuItems=e}},{key:"render",value:function(){var e,t=this;return he(Ge(),ze(this.tools,(function(e){return e.id}),(function(e){return e.render(t.selectTool)})),(e=this.activeTool,he(Ye(),void 0!==e.options?"active":"",void 0!==e.options?e.options.render():"")))}},{key:"activeTool",get:function(){return this.toolsById[this.store.state.toolbar.activeTool]}}]),e}();function Je(){var e=b(["<h4>An error occurred.</h4>"]);return Je=function(){return e},e}var We=[function(e){var t=e.state,n=e.toolbar,i=new Be(t.units,10,0);i.on("colorfeature",t.update),i.on("colorend",t.render);for(var r=0,o=[new je,new Se(i),new Ee(i)];r<o.length;r++){var a=o[r];n.addTool(a)}n.selectTool("pan")}],Ke=function(){function e(t,n,r){var a=this;o(this,e),this.render=this.render.bind(this),i.default.accessToken=n.token,r=c({style:"mapbox://styles/mapbox/outdoors-v11"},r);var s=document.querySelector(t);s.classList.add("districtr__embed-container");var u=document.createElement("div"),l=O(8);u.setAttribute("id",l),u.style="height: 100%; width: 100%",s.appendChild(u),this.toolbarTarget=document.createElement("div"),s.appendChild(this.toolbarTarget),this.addressMarker=null,this.graph=null,this.showError=n.errors,this.allowProceed=n.allowProceed,fetch(n.graph).then((function(e){return e.json()})).then((function(e){a.graph=e})),fetch(n.url).then((function(e){return e.json()})).then((function(e){a.bounds=e.units.bounds,a.zoomTo=n.zoomTo||e.units.zoomTo||14,a.mapState=new ve(l,{bounds:e.units.bounds,fitBoundsOptions:{padding:{top:50,right:50,left:50,bottom:50}}},r.style),a.mapState.map.on("load",(function(){e.showOverlay=n.showOverlay,e.overlayRule=n.overlayRule,a.state=new be(a.mapState.map,e,(function(){return null})),a.enableMap=function(){var e=this;if(!this.enabled){this.enabled=!0,this.store=new Re(P,{toolbar:{}}),this.toolbar=new Ze(this.store,this);var t,n=_(We);try{for(n.s();!(t=n.n()).done;){(0,t.value)(this)}}catch(e){n.e(e)}finally{n.f()}this.store.subscribe(this.render),this.state.subscribe(this.render),this.map.boxZoom.enable(),this.map.scrollZoom.enable(),this.map.dragPan.enable(),this.map.dragRotate.enable(),this.map.keyboard.enable(),this.map.doubleClickZoom.enable(),this.map.touchZoomRotate.enable();var i=document.createElement("div");i.id="ns__msg-draw",i.className="ns__msg",i.style.margin="0",i.style.borderRadius="0",i.hidden=!0,this.toolbarTarget.prepend(i);var r=-1,o=this.checkConnected.bind(this,i);this.toolbar.toolsById.brush.brush.on("mouseup",(function(){window.clearTimeout(r),r=window.setTimeout(o,50)}));var a=document.querySelector("#ns__clear-all");a.hidden=!1,a.addEventListener("click",(function(){e.clearNeighborhood(),window.setTimeout(o,50)}))}},a.disableMap=function(){this.enabled=!1,this.map.boxZoom.disable(),this.map.scrollZoom.disable(),this.map.dragPan.disable(),this.map.dragRotate.disable(),this.map.keyboard.disable(),this.map.doubleClickZoom.disable(),this.map.touchZoomRotate.disable()},a.disableMap()}))})).catch((function(e){console.error(e),ce(he(Je()),s)}))}return s(e,[{key:"render",value:function(){this.toolbarTarget&&this.toolbar&&ce(this.toolbar.render(),this.toolbarTarget)}},{key:"checkConnected",value:function(e){var t=this;if(!this.graph)return null;var n=this.state.plan.assignment,i={},r=0;for(var o in n)0===n[o]&&(i[o]=!1,r++);var a=function e(n,i){var r=1;n[i]=!0;var o,a=_(t.graph[i]);try{for(a.s();!(o=a.n()).done;){var s=o.value;!1===n[s]&&(r+=e(n,s))}}catch(e){a.e(e)}finally{a.f()}return r}(i,this.homeBlock.id)===r;return a?(e.hidden=!0,e.innerHTML=null):(e.hidden=!1,e.innerHTML="Your neighborhood must be in one piece only."),this.allowProceed(a),a}},{key:"loadAddress",value:function(e,t){var n=this,r="https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(encodeURIComponent(e),".json?autocomplete=false&limit=1&bbox=").concat(this.bounds[0][0],",").concat(this.bounds[0][1],",").concat(this.bounds[1][0],",").concat(this.bounds[1][1],"&access_token=").concat(i.default.accessToken);fetch(r).then((function(e){return e.json()})).then((function(e){if(0!==e.features.length){n.showError(null),n.enableMap(),t&&(t.value=e.features[0].place_name);var r=e.features[0].center;n.addressMarker&&n.addressMarker.remove(),n.addressMarker=new i.default.Marker({color:"#ff4f49"}).setLngLat(r).addTo(n.map);var o=!1,a=function(){var e=n.map.queryRenderedFeatures(n.map.project(r),{layers:[n.state.units.id],validate:!1})[0];e&&!o&&(o=!0,n.homeBlock&&(n.map.setFeatureState(n.homeBlock,c(c({},n.homeBlock.state),{},{home:!1})),n.clearNeighborhood(!1)),n.state.units.setAssignment(e,0),n.state.plan.assignment[e.id]=0,n.homeBlock=e,e.state.home=!0,n.map.setFeatureState(e,c(c({},e.state),{},{home:!0})))};n.map.once("moveend",(function(){n.state.layers[0].untilSourceLoaded(a)}));n.map.easeTo({center:r,zoom:Math.max(n.zoomTo,7.5),duration:1e3})}else n.showError("Address not found.")}))}},{key:"getNeighborhood",value:function(){var e=this.state.plan.assignment;return Object.keys(e).filter((function(t){return 0===e[t]})).join(",")}},{key:"clearNeighborhood",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=Object.keys(this.state.plan.assignment),i=this.state.units.querySourceFeatures().filter((function(e){return n.includes(e.id)}));i.forEach((function(t){return e.state.units.setAssignment(t,null)})),n.forEach((function(t){e.state.plan.assignment[t]=null})),this.homeBlock&&t&&(this.state.units.setAssignment(this.homeBlock,0),this.state.plan.assignment[this.homeBlock.id]=0)}},{key:"map",get:function(){return this.mapState.map}}]),e}();window.MapDraw=function(e,t,n){return new Ke(e,t,n)},window.showError=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#ns__msg-search",n=document.querySelector(t);null!==e?(n.hidden=!1,n.innerHTML=e):(n.hidden=!0,n.innerHTML="&nbsp;")},window.BivariateOverlay=function(e){return{"fill-color":["interpolate-hcl",["linear"],["case",["==",e.denominator||["get","pop"],0],e.midpt||.5,["/",e.numerator||["get","gop"],e.denominator||["get","pop"]]],0,e.colorLow||"rgb(30, 60, 210)",e.midpt||.5,"rgba(255, 255, 255, 0)",1,e.colorHigh||"rgb(210, 30, 20)"],"fill-opacity":e.opacity||.375}},window.UnivariateOverlay=function(e){return{"fill-color":["interpolate-hcl",["linear"],["case",["==",e.denominator||["get","pop"],0],0,["/",e.numerator||["get","dem"],e.denominator||["get","pop"]]],0,"rgba(255, 255, 255, 0)",1,e.color||"#c0b010"],"fill-opacity":e.opacity||.375}},e.EmbeddedDistrictr=Ke,Object.defineProperty(e,"__esModule",{value:!0})}));
